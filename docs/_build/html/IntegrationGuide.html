

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Integration Options &mdash; Doc.Bankograph 24th June documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Doc.Bankograph 24th June documentation" href="index.html"/>
        <link rel="prev" title="Home" href="Home.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Doc.Bankograph
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Home.html">Home</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Home.html#online-documentation">Online Documentation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Integration Options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#payment-page">Payment Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rest-api">REST API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#batch-processing-api">Batch Processing API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sdk">SDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#integration-guides">Integration Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bankograph-payment-page-v2">Bankograph Payment Page v2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hpp-integration-guide">HPP Integration Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#payment-processing-example">Payment-Processing Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#merchants-integrated-with-nvp-hpp">Merchants Integrated with NVP (HPP)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#epp-integration-guide">EPP Integration Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Payment-Processing Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#merchants-integrated-with-nvp-epp">Merchants Integrated with NVP (EPP)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#seamless-integration-guide">Seamless Integration Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#first-steps">First Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Payment-Processing Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Doc.Bankograph</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Integration Options</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/IntegrationGuide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="integration-options">
<h1>Integration Options<a class="headerlink" href="#integration-options" title="Permalink to this headline">¶</a></h1>
<p>There are multiple integration options available for Bankograph Payment Gateway.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul class="simple">
<li><p>The integration via <strong>Payment Page</strong> is described under <a class="reference internal" href="#payment-page">Payment Page</a>.</p></li>
<li><p>For (near) real-time processing the backend implementation is described under <a class="reference internal" href="#rest-api">REST API</a>.
However, the description of payment methods, for example, is common for both Payment Page and         REST API.</p></li>
<li><p>Processing of multiple transactions using batches is described under Batch Processing API, available for both SEPA Direct Debit and SEPA Credit Transfer.</p></li>
<li><p>Our Payment SDK offers a seamless user experience by rendering a payment form as an integral part of the merchant’s mobile application.</p></li>
</ul>
</div>
<div class="section" id="payment-page">
<h2>Payment Page<a class="headerlink" href="#payment-page" title="Permalink to this headline">¶</a></h2>
<p>Bankograph Payment Page stands for secure, flexible, easy and transparent payment processing.</p>
<p>It provides all payment methods and related options in one solution: Credit Card (with/without 3D secure), SEPA, online banking payments, mobile payments, alternative payment methods, and industry-specific solutions.</p>
<p>It handles the payment method selection as well as the collection of payment details or consumer redirects to alternative payment provider sites. With this solution, the merchant is only required to conform to a limited PCI scope (self-questionnaire A).</p>
<p>Bankograph Payment Page is available in three formats:</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>Hosted Payment Page (HPP): The consumer is redirected to Bankograph Payment Gateway to finish the checkout process.</p></li>
<li><p>Embedded Payment Page (EPP): The payment screen is displayed in overlay directly on the merchant’s checkout page.</p></li>
<li><p>Seamless integration: The merchant’s checkout page is incorporated into Bankograph’s payment form. This solution provides a seamless shopping experience for web-shoppers.</p></li>
</ul>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Only HTML knowledge is required for Bankograph Payment Page integration.</p>
</div>
</div>
<div class="section" id="rest-api">
<h2>REST API<a class="headerlink" href="#rest-api" title="Permalink to this headline">¶</a></h2>
<p>When merchants want full control over the checkout and payment process they can create requests themselves and send them directly to the REST API. All communications between a merchant and the REST API are secured by TLS encryption (HTTPS).</p>
<p>Integration is possible by:</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>XML requests sent from merchant’s backend (server-to-server)</p></li>
<li><p>JSON respectively</p></li>
<li><p>NVP (for credit card only)</p></li>
</ul>
</div>
<p>PCI certified merchants can use Bankograph Payment Gateway without any restrictions.</p>
<p>Non PCI certified merchants can use Bankograph Payment Gateway only with referenced or recurring transactions. For initial transactions they must use a front end solution (e.g. HPP).</p>
<p>Details to integrate Bankograph Payment Gateway via REST API are described here.</p>
</div>
<div class="section" id="batch-processing-api">
<h2>Batch Processing API<a class="headerlink" href="#batch-processing-api" title="Permalink to this headline">¶</a></h2>
<p>In order to process multiple transactions at the same time, Bankograph’s Batch Processing is the ideal solution for both fast and easy to implement offline bulk transaction processing.</p>
<p>Batch processing is possible for the following payment methods:</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>SEPA Direct Debit</p></li>
<li><p>SEPA Credit Transfer</p></li>
<li><p>Credit Card</p></li>
</ul>
</div>
</div>
<div class="section" id="sdk">
<h2>SDK<a class="headerlink" href="#sdk" title="Permalink to this headline">¶</a></h2>
<p>The Software Development Kit (SDK) serves as a wrapper for the Bankograph Payment Gateway with a PCI V3 compliant native mobile payment form. SDK is naturally developed for the integration into a merchant’s app as a software library where it covers sending payment requests to the Bankograph Payment Gateway. It uses REST requests constructed by the merchant sent over HTTPS protocol to Bankograph Payment Gateway end-point where the REST API is exposed.</p>
<p>The following payment methods are currently supported:</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>Credit Card</p></li>
<li><p>PayPal</p></li>
<li><p>SEPA Direct Debit</p></li>
<li><p>Apple Pay</p></li>
<li><p>Google Pay™</p></li>
</ul>
</div>
<p>Operation system interfaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">iOS</span>

<span class="o">-</span> <span class="n">Android</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Working programmer knowledge is required to integrate this way.</p>
</div>
</div>
</div>
<div class="section" id="integration-guides">
<h1>Integration Guides<a class="headerlink" href="#integration-guides" title="Permalink to this headline">¶</a></h1>
<div class="section" id="bankograph-payment-page-v2">
<h2>Bankograph Payment Page v2<a class="headerlink" href="#bankograph-payment-page-v2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="hpp-integration-guide">
<h3>HPP Integration Guide<a class="headerlink" href="#hpp-integration-guide" title="Permalink to this headline">¶</a></h3>
<div class="section" id="overview">
<h4>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h4>
<p>To integrate the Hosted Payment Page (HPP) in your shop, use a simple backend-to-backend JSON WPP v2 Workflow for the payment process.</p>
<ol class="arabic simple">
<li><p><strong>Create a payment session:</strong> You send an initial POST request with details of the transaction to the Bankograph Payment Page v2 (WPP v2). This POST request is secured by basic access authentication.</p></li>
<li><p><strong>Redirect the consumer to the payment page:</strong> WPP v2 returns an initial response URL.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">*</span> <span class="n">If</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">POST</span> <span class="n">request</span> <span class="ow">is</span> <span class="n">correct</span> <span class="o">*</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">response</span> <span class="n">URL</span> <span class="n">to</span> <span class="n">redirect</span> <span class="n">the</span> <span class="n">consumer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">page</span><span class="o">.</span> <span class="n">The</span> <span class="n">consumer</span> <span class="n">fills</span> <span class="n">out</span> <span class="n">the</span> <span class="n">required</span> <span class="n">fields</span> <span class="n">on</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">page</span> <span class="ow">and</span> <span class="n">submits</span> <span class="n">the</span> <span class="n">payment</span><span class="o">.</span> <span class="n">Continue</span> <span class="k">with</span> <span class="n">step</span> <span class="mf">3.</span>

<span class="o">-</span> <span class="o">*</span> <span class="n">If</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">POST</span> <span class="n">request</span> <span class="ow">is</span> <span class="n">faulty</span> <span class="o">*</span><span class="p">,</span> <span class="n">WPP</span> <span class="n">v2</span> <span class="n">returns</span> <span class="n">an</span> <span class="n">error</span> <span class="n">code</span> <span class="k">with</span> <span class="n">a</span> <span class="n">description</span> <span class="n">of</span> <span class="n">the</span> <span class="n">problem</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">response</span><span class="o">.</span> <span class="o">**</span><span class="n">Return</span> <span class="n">to</span> <span class="n">step</span> <span class="mi">1</span><span class="o">**.</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Parse and process the payment response:</strong> The payment is processed. Depending on the result (successful, pending, failed or canceled), the consumer is redirected to the respective page. The WPP v2 sends a POST request containing base64 encoded payment data to the same URL. It is highly recommended that you parse and process this base64 encoded response to verify the payment.</p></li>
</ol>
<p><strong>The payment process is complete.</strong></p>
</div>
<div class="section" id="payment-processing-example">
<h4>Payment-Processing Example<a class="headerlink" href="#payment-processing-example" title="Permalink to this headline">¶</a></h4>
<p>This is an example of a credit card transaction to show how to process a payment with the Hosted Payment Page.</p>
<p>For more supported payment methods and payment-method-specific integration guides, go to <a href="#id19"><span class="problematic" id="id20">`Payment Methods with WPP v2`_</span></a>.</p>
<p>The payment-processing example is designed for the testing environment and does not use real information.</p>
<p><strong>Payment processing with the Bankograph Payment Page v2 generally follows the same steps:</strong></p>
<ol class="arabic simple">
<li><p>Create a payment session (initial request).</p></li>
<li><p>Redirect the consumer to the payment page (initial response URL).</p></li>
<li><p>Highly recommended: Parse and process the payment response.</p></li>
</ol>
<p>We provide ready-made JSON samples for each step of this process. Use a tool such as Postman to test them.</p>
<p><strong>Setup and Test Credentials</strong></p>
<p>Before you can send your first request, use the following information to set up your testing tool:</p>
<table class="docutils align-default" id="id9">
<caption><span class="caption-text">Test Credentials</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>URL (Endpoint)</strong></p></td>
<td><p>{rest-api-test-endpoint}</p></td>
</tr>
<tr class="row-even"><td><p><strong>Merchant Account ID (MAID)</strong></p></td>
<td><p>7a6dd74f-06ab-4f3f-a864-adc52687270a</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Username</strong></p></td>
<td><p>70000-APIDEMO-CARD</p></td>
</tr>
<tr class="row-even"><td><p><strong>Password</strong></p></td>
<td><p>ohysS0-dvfMx</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Secret Key (used for response verification)</strong></p></td>
<td><p>a8c3fce6-8df7-4fd6-a1fd-62fa229c5e55</p></td>
</tr>
<tr class="row-even"><td><p><strong>Test Card</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>Card number</strong></p></td>
<td><p>4200000000000018</p></td>
</tr>
<tr class="row-even"><td><p><strong>Expiration date</strong></p></td>
<td><p>01/23</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CVV</strong></p></td>
<td><p>018</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple">
<li><p><strong>Create a Payment Session</strong></p></li>
</ol>
<p>To create a payment session, send a POST request to the /api/payment/register endpoint, e.g. <a class="reference external" href="https://wpp-test.bankograph.com/api/payment/register">https://wpp-test.bankograph.com/api/payment/register</a>.</p>
<p>This is an HTTP request with two headers:</p>
<blockquote>
<div><p><strong>Request Headers</strong></p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Authorization</span><span class="p">:</span> <span class="n">Basic</span> <span class="n">NzAwMDAtQVBJREVNTy1DQVJEOm9oeXNTMC1kdmZNeA</span><span class="o">==</span>
</pre></div>
</div>
<p>The Authorization header needs to be formatted as: &quot;Authorization&quot;=&quot;Basic&quot; + base64(&quot;username:password&quot;)</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Code Blocks can have captions.</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span> <span class="p">{</span>
   <span class="nt">&quot;payment&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="nt">&quot;merchant-account-id&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;7a6dd74f-06ab-4f3f-a864-adc52687270a&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;request-id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{$guid}}&quot;</span><span class="p">,</span>
<span class="nt">&quot;transaction-type&quot;</span><span class="p">:</span> <span class="s2">&quot;authorization&quot;</span><span class="p">,</span>
<span class="nt">&quot;requested-amount&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;account-holder&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;first-name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
  <span class="nt">&quot;last-name&quot;</span><span class="p">:</span> <span class="s2">&quot;Doe&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;payment-methods&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;payment-method&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;creditcard&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">},</span>
<span class="nt">&quot;success-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/success&quot;</span><span class="p">,</span>
<span class="nt">&quot;fail-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/error&quot;</span><span class="p">,</span>
<span class="nt">&quot;cancel-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/cancel&quot;</span>
<span class="p">}</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<table class="docutils align-default" id="id11">
<caption><span class="caption-text">Field Table</span><a class="headerlink" href="#id11" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Field (JSON)</strong></p></td>
<td><p><strong>Data Type</strong></p></td>
<td><p><strong>Required/Optional</strong></p></td>
<td><p><strong>Size</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>merchant-account-id / value</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>36</p></td>
<td><p>A unique identifier assigned to every merchant account (by Bankograph).</p></td>
</tr>
<tr class="row-odd"><td><p>request-id</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>150</p></td>
<td><dl class="simple">
<dt>A unique identifier assigned to every request (by merchant). Used when searching for or referencing it later. {{$guid}} serves as a placeholder for a random request-id. Allowed characters:</dt><dd><p>a - z
0 - 9</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>transaction-type</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>36</p></td>
<td><p>The requested transaction type.</p></td>
</tr>
<tr class="row-odd"><td><p>requested-amount /Value</p></td>
<td><p>Numeric</p></td>
<td><p>Required</p></td>
<td><p>18</p></td>
<td><p>The full amount that is requested/contested in a transaction. 2 decimal places allowed. Use (decimal point) as the separator.</p></td>
</tr>
<tr class="row-even"><td><p>requested-amount /currency</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>3</p></td>
<td><p>The currency of the requested/contested transaction amount. Format 3-character abbreviation according to ISO 4217.</p></td>
</tr>
<tr class="row-odd"><td><p>account holder / first-name</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>32</p></td>
<td><p>The first name of the account holder.</p></td>
</tr>
<tr class="row-even"><td><p>account holder / last-name</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>32</p></td>
<td><p>The last name of the account holder.</p></td>
</tr>
<tr class="row-odd"><td><p>payment-method / name</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>15</p></td>
<td><p>The name of the payment method used. Set this value to creditcard.</p></td>
</tr>
<tr class="row-even"><td><p>success-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after a successful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/success">https://demoshop-test.bankograph.com/demoshop/#/success</a></p></td>
</tr>
<tr class="row-odd"><td><p>fail-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after a unsuccessful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/error">https://demoshop-test.bankograph.com/demoshop/#/error</a></p></td>
</tr>
<tr class="row-even"><td><p>cancel-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after having canceled a payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/cancel">https://demoshop-test.bankograph.com/demoshop/#/cancel</a></p></td>
</tr>
</tbody>
</table>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>To create a payment session with Credit Card using 3D Secure 2 authentication, you need to include 3D Secure 2 fields in your initial request.
Most of these fields are optional but we recommend the implementation of optional fields, as this creates a smoother user experience and ensures a higher level of security.
Need more information on 3D Secure 2? Head to our general introduction to 3D Secure 2.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><strong>Which Payment Methods Can I Choose?</strong></p>
<p>Leave out the payment-methods object from the request. WPP v2 will show a grid of all available payment methods (based on your merchant configuration).</p>
<p>Alternatively, check out Payment Methods with WPP v2 for an overview of all supported payment methods.</p>
</div>
<p><strong>Download the full integration demo from our GitHub</strong></p>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-java"><img alt="_images/Available_on_Github_JAVA.png" src="_images/Available_on_Github_JAVA.png" /></a>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-php"><img alt="_images/Available_on_Github_PHP.png" src="_images/Available_on_Github_PHP.png" /></a>
<ol class="arabic simple" start="2">
<li><p><strong>Redirect the Consumer to the Payment Page</strong></p></li>
</ol>
<p>The response to the initial authorization request contains the payment-redirect-url.</p>
<p><strong>Response to Authorization Request</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;payment-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://wpp-test.bankograph.com/?wPaymentToken=f0c0e5b3-23ad-4cb4-abca-ed80a0e770e7&quot;</span>
<span class="p">}</span>

<span class="n">Use</span> <span class="n">the</span> <span class="n">payment</span><span class="o">-</span><span class="n">redirect</span><span class="o">-</span><span class="n">url</span> <span class="n">to</span> <span class="n">redirect</span> <span class="n">the</span> <span class="n">consumer</span><span class="o">.</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">implement</span> <span class="n">the</span> <span class="n">redirection</span> <span class="ow">in</span> <span class="nb">any</span> <span class="n">way</span> <span class="n">that</span> <span class="n">suits</span> <span class="n">you</span> <span class="n">best</span><span class="o">.</span>

<span class="o">**</span><span class="n">Redirecting</span> <span class="n">Consumers</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Payment</span> <span class="n">Page</span> <span class="n">Using</span><span class="o">**</span> <span class="n">WPP</span><span class="o">.</span><span class="n">hostedPayUrl</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">our</span> <span class="n">ready</span><span class="o">-</span><span class="n">made</span> <span class="n">function</span> <span class="n">to</span> <span class="n">handle</span> <span class="n">the</span> <span class="n">redirection</span><span class="p">:</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">our</span> <span class="n">ready</span><span class="o">-</span><span class="n">made</span> <span class="n">function</span> <span class="n">to</span> <span class="n">handle</span> <span class="n">the</span> <span class="n">redirection</span><span class="p">:</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Add the paymentPage.js library to your checkout page HTML code</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://wpp-test.bankograph.com/loader/paymentPage.js&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Submit the initial payment request on the backend.</p></li>
</ol>
<p>3. Call the <code class="docutils literal notranslate"><span class="pre">WPP.hostedPayUrl(payment-redirect-url)</span></code> function in your HTML code to redirect the consumer to a new window:
.. code-block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
 <span class="n">WPP</span><span class="o">.</span><span class="n">hostedPayUrl</span><span class="p">(</span><span class="s2">&quot;https://wpp-test.bankograph.com/?wPaymentToken=f0c0e5b3-23ad-4cb4-abca-ed80a0e770e7&quot;</span><span class="p">)</span>
 <span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>

<span class="n">Make</span> <span class="n">sure</span> <span class="n">to</span> <span class="k">pass</span> <span class="n">the</span> <span class="n">payment</span><span class="o">-</span><span class="n">redirect</span><span class="o">-</span><span class="n">url</span> <span class="n">value</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">initial</span> <span class="n">response</span> <span class="n">to</span> <span class="n">the</span> <span class="n">redirection</span> <span class="n">function</span> <span class="ow">and</span> <span class="n">call</span> <span class="n">it</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The consumer is redirected to the payment form. There they enter their data and submit the form to confirm the payment. The response can</p>
<ul class="simple">
<li><p>be successful (<code class="docutils literal notranslate"><span class="pre">transaction-state:</span> <span class="pre">success</span></code>)</p></li>
<li><p>fail (<code class="docutils literal notranslate"><span class="pre">transaction-state:</span> <span class="pre">failed</span></code>)</p></li>
<li><p>or the consumer canceled the payment before/after submission (<code class="docutils literal notranslate"><span class="pre">transaction-state:</span> <span class="pre">failed</span></code>).</p></li>
</ul>
<p>The transaction result is displayed as the value of <code class="docutils literal notranslate"><span class="pre">transaction-state</span></code> in the payment response. Canceled payments are returned as <code class="docutils literal notranslate"><span class="pre">&quot;transaction-state&quot;</span> <span class="pre">:</span> <span class="pre">&quot;failed&quot;</span></code>, but the status description indicates it was canceled. More information (including the status code) can also be found in the payment response in the statuses object.</p>
<p>In any case, a base64 encoded response containing payment information is sent to the corresponding redirection URL <code class="docutils literal notranslate"><span class="pre">(success-redirect-url,</span> <span class="pre">cancel-redirect-url,</span> <span class="pre">or</span> <span class="pre">fail-redirect-url)</span></code>.</p>
<p>See <a href="#id21"><span class="problematic" id="id22">`Configuring Redirects and IPNs for WPP v2`_</span></a> for more information on redirection targets after payment.</p>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Parse and Process the Payment Response (Highly Recommended)</strong></p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">Where</span> <span class="pre">Can</span> <span class="pre">I</span> <span class="pre">Find</span> <span class="pre">the</span> <span class="pre">Payment</span> <span class="pre">Response?</span></code></p>
<p>WPP v2 sends the final response to the success/fail page where the consumer is redirected to at the end of the payment session. This final response contains the payment data in a base64 encoded JSON format. It is sent with a POST request as form data <code class="docutils literal notranslate"><span class="pre">response-base64</span></code>.</p>
<img alt="_images/Base64_v2_1.png" src="_images/Base64_v2_1.png" />
<p>Before you are able to parse and process the payment response, you need to decode it.</p>
<p><strong>To test this</strong></p>
<ul class="simple">
<li><p>Copy and paste the <code class="docutils literal notranslate"><span class="pre">payment-redirect-url</span></code> into your browser.</p></li>
<li><p>Open your browser’s console and complete the payment with the credit card information provided above.</p></li>
<li><p>In your browser’s console, find the form data <code class="docutils literal notranslate"><span class="pre">response-base64</span></code> (see screenshot).</p></li>
<li><p>Copy and paste the response into a base64 decoder of your choice, e.g. <a href="#id1"><span class="problematic" id="id2">:PEP:`Base64 Decode`</span></a>.</p></li>
<li><p>Decode the response to view the payment response details.</p></li>
</ul>
<p>You can find a decoded payment response example below.</p>
<p><strong>Parse and Process the Payment Response (Decoded Payment Response)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;payment&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;transaction-type&quot;</span><span class="p">:</span> <span class="s2">&quot;authorization&quot;</span><span class="p">,</span>
   <span class="s2">&quot;transaction-id&quot;</span><span class="p">:</span> <span class="s2">&quot;08649015-eb17-4c67-ab5f-d132af616e02&quot;</span><span class="p">,</span>
   <span class="s2">&quot;completion-time-stamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-12-19T12:02:26&quot;</span><span class="p">,</span>
   <span class="s2">&quot;card-token&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;token-id&quot;</span><span class="p">:</span> <span class="s2">&quot;4242796444090018&quot;</span><span class="p">,</span>
     <span class="s2">&quot;masked-account-number&quot;</span><span class="p">:</span> <span class="s2">&quot;420000******0018&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;merchant-account-id&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;7a6dd74f-06ab-4f3f-a864-adc52687270a&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;transaction-state&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
   <span class="s2">&quot;payment-methods&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;payment-method&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
         <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;creditcard&quot;</span>
       <span class="p">}</span>
     <span class="p">]</span>
    <span class="p">},</span>
   <span class="s2">&quot;cancel-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/cancel&quot;</span><span class="p">,</span>
   <span class="s2">&quot;success-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/success&quot;</span><span class="p">,</span>
   <span class="s2">&quot;fail-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/error&quot;</span><span class="p">,</span>
   <span class="s2">&quot;api-id&quot;</span><span class="p">:</span> <span class="s2">&quot;wpp&quot;</span>
  <span class="p">},</span>
 <span class="s2">&quot;request-id&quot;</span><span class="p">:</span> <span class="s2">&quot;28285dbd-ecd3-49bd-a7e5-0239affa2448&quot;</span><span class="p">,</span>
 <span class="s2">&quot;requested-amount&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span><span class="p">,</span>
   <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">10</span>
  <span class="p">},</span>
 <span class="s2">&quot;statuses&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">{</span>
       <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;3d-acquirer:The resource was successfully created.&quot;</span><span class="p">,</span>
       <span class="s2">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;information&quot;</span><span class="p">,</span>
       <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;201.0000&quot;</span>
     <span class="p">}</span>
   <span class="p">]</span>
  <span class="p">},</span>
 <span class="s2">&quot;authorization-code&quot;</span><span class="p">:</span> <span class="s2">&quot;801433&quot;</span><span class="p">,</span>
 <span class="s2">&quot;account-holder&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;first-name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
   <span class="s2">&quot;last-name&quot;</span><span class="p">:</span> <span class="s2">&quot;Doe&quot;</span>
  <span class="p">},</span>
 <span class="s2">&quot;descriptor&quot;</span><span class="p">:</span> <span class="s2">&quot;demo descriptor&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default" id="id12">
<caption><span class="caption-text">Field Table</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Field (JSON)</strong></p></td>
<td><p><strong>Data Type</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>transaction-type</p></td>
<td><p>String</p></td>
<td><p>The requested transaction type.</p></td>
</tr>
<tr class="row-odd"><td><p>transaction-id</p></td>
<td><p>String</p></td>
<td><p>A unique identifier to every transaction (by Bankograph). Used when searching for or referencing to it later.</p></td>
</tr>
<tr class="row-even"><td><p>completion-time-stamp</p></td>
<td><p>YYYY-MM-DD-Thh:mm:ss</p></td>
<td><p>The UTC/ISO time-stamp documents the time &amp; date when the transaction was executed. Format: YYYY-MM-DDThh:mm:ss (ISO).</p></td>
</tr>
<tr class="row-odd"><td><p>card token / token-id</p></td>
<td><p>String</p></td>
<td><p>A unique identifier assigned to every card token.</p></td>
</tr>
<tr class="row-even"><td><p>card token / masked-account-number</p></td>
<td><p>String</p></td>
<td><p>This is the masked card account number of the consumer.</p></td>
</tr>
<tr class="row-odd"><td><p>merchant-account-id / value</p></td>
<td><p>String</p></td>
<td><p>A unique identifier assigned to every merchant account (by Bankograph).</p></td>
</tr>
<tr class="row-even"><td><p>transaction-state</p></td>
<td><p>String</p></td>
<td><dl>
<dt>The current transaction state. Possible values:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">in-progress</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">success</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">failed</span></code></p></li>
</ul>
<p>Typically, a transaction starts with state <code class="docutils literal notranslate"><span class="pre">in-progress</span></code> and finishes with state either <code class="docutils literal notranslate"><span class="pre">success</span></code> or <code class="docutils literal notranslate"><span class="pre">failed</span></code>. This information is returned in the response only.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>payment-mode / name</p></td>
<td><p>String</p></td>
<td><p>The name of the payment method used for the transaction.</p></td>
</tr>
<tr class="row-even"><td><p>cancel-redirect-url</p></td>
<td><p>String</p></td>
<td><p>The URL to which the consumer is redirected after having canceled payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/cancel">https://demoshop-test.bankograph.com/demoshop/#/cancel</a></p></td>
</tr>
<tr class="row-odd"><td><p>success-redirect-url</p></td>
<td><p>String</p></td>
<td><p>The URL to which the consumer is redirected after a successful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/success">https://demoshop-test.bankograph.com/demoshop/#/success</a></p></td>
</tr>
<tr class="row-even"><td><p>fail-redirect-url</p></td>
<td><p>String</p></td>
<td><p>The URL to which the consumer is redirected after a unsuccessful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/error">https://demoshop-test.bankograph.com/demoshop/#/error</a></p></td>
</tr>
<tr class="row-odd"><td><p>api-id</p></td>
<td><p>String</p></td>
<td><p>Identifier of the currently used API.</p></td>
</tr>
<tr class="row-even"><td><p>request-id</p></td>
<td><p>String</p></td>
<td><p>A unique identifier assigned to every request (by merchant). Used when searching for or referencing it later.</p></td>
</tr>
<tr class="row-odd"><td><p>requested-amount / currency</p></td>
<td><p>String</p></td>
<td><p>The currency of the requested/contested transaction amount.</p></td>
</tr>
<tr class="row-even"><td><p>requested-amount / value</p></td>
<td><p>Numeric</p></td>
<td><p>The full amount that is requested/contested in a transaction.</p></td>
</tr>
<tr class="row-odd"><td><p>status / description</p></td>
<td><p>String</p></td>
<td><p>The description of the transaction status message.</p></td>
</tr>
<tr class="row-even"><td><p>status / severity</p></td>
<td><p>String</p></td>
<td><dl class="simple">
<dt>The definition of the status message. Possible values:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">information</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error</span></code></p></li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>status / code</p></td>
<td><p>String</p></td>
<td><p>Status code of the status message.</p></td>
</tr>
<tr class="row-even"><td><p>authorization-code</p></td>
<td><p>String</p></td>
<td><p>Output code for transaction type authorization.</p></td>
</tr>
<tr class="row-odd"><td><p>account-holder / first-name</p></td>
<td><p>String</p></td>
<td><p>The first name of the account holder.</p></td>
</tr>
<tr class="row-even"><td><p>account-holder / last-name</p></td>
<td><p>String</p></td>
<td><p>The last name of the account holder.</p></td>
</tr>
<tr class="row-odd"><td><p>descriptor</p></td>
<td><p>String</p></td>
<td><p>Describes the transaction.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">For</span> <span class="n">more</span> <span class="n">information</span> <span class="n">on</span> <span class="n">redirect</span> <span class="n">URLs</span><span class="p">,</span> <span class="n">see</span> <span class="n">Configuring</span> <span class="n">Redirects</span> <span class="ow">and</span> <span class="n">IPNs</span> <span class="k">for</span> <span class="n">WPP</span> <span class="n">v2</span><span class="o">.</span>
<span class="n">For</span> <span class="n">payment</span><span class="o">-</span><span class="n">method</span><span class="o">-</span><span class="n">specific</span> <span class="n">requests</span><span class="p">,</span> <span class="n">head</span> <span class="n">over</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Payment</span> <span class="n">Methods</span> <span class="k">with</span> <span class="n">WPP</span> <span class="n">v2</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="merchants-integrated-with-nvp-hpp">
<h4>Merchants Integrated with NVP (HPP)<a class="headerlink" href="#merchants-integrated-with-nvp-hpp" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p><strong>Migrating to WPP v2</strong></p>
</div></blockquote>
<p>In addition to the new backend-to-backend JSON flow, WPP v2 supports an updated NVP flow for merchants who already integrated one of the Payment Page solutions previously and do not want to switch.</p>
<p>In that case, the migration to WPP v2 requires only a few minor changes. New features have an NVP field equivalent so you can use them in your integration. Check the WPP v2 Features section for specifics.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Contact `merchant support`_ for your production credentials.
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Find the <code class="docutils literal notranslate"><span class="pre">paymentPageLoader</span></code> JavaScript library in your <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> HTML code:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://api-test.bankograph.com/engine/hpp/paymentPageLoader.js&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Replace it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://wpp-test.bankograph.com/loader/paymentPage.js&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Find the <code class="docutils literal notranslate"><span class="pre">hostedPay</span></code> function call at the end of your Pay button function:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WirecardPaymentPage</span><span class="o">.</span><span class="n">hostedPay</span><span class="p">(</span><span class="n">requestData</span><span class="p">);</span>
</pre></div>
</div>
<p>Replace it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WPP</span><span class="o">.</span><span class="n">hostedPay</span><span class="p">(</span><span class="n">requestData</span><span class="p">);</span>
</pre></div>
</div>
<p>The fields in <code class="docutils literal notranslate"><span class="pre">requestData</span></code> remain the same and no changes are needed.</p>
</div>
</div>
<div class="section" id="epp-integration-guide">
<h3>EPP Integration Guide<a class="headerlink" href="#epp-integration-guide" title="Permalink to this headline">¶</a></h3>
<p><em>Download the full integration demo from our GitHub</em>
<strong>Download the full integration demo from our GitHub</strong></p>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-java"><img alt="_images/Available_on_Github_JAVA.png" src="_images/Available_on_Github_JAVA.png" /></a>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-php"><img alt="_images/Available_on_Github_PHP.png" src="_images/Available_on_Github_PHP.png" /></a>
<div class="section" id="id3">
<h4>Overview<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>To integrate the Embedded Payment Page (EPP) in your shop, use a simple backend-to-backend JSON workflow for the payment process.</p>
<ol class="arabic simple">
<li><p><strong>Create a payment session:</strong> You send an initial POST request with details of the transaction to the Bankograph Payment Page v2 (WPP v2). This POST request is secured by basic access authentication.</p></li>
<li><p><strong>Render/create the payment page:</strong> WPP v2 returns an initial response URL.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">If</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">POST</span> <span class="n">request</span> <span class="ow">is</span> <span class="n">correct</span><span class="p">,</span> <span class="n">use</span> <span class="n">the</span> <span class="n">response</span> <span class="n">URL</span> <span class="n">to</span> <span class="n">render</span> <span class="n">the</span> <span class="n">embedded</span> <span class="n">payment</span> <span class="n">page</span> <span class="k">as</span> <span class="n">an</span> <span class="n">overlay</span> <span class="n">to</span> <span class="n">the</span> <span class="n">checkout</span> <span class="n">page</span><span class="o">.</span> <span class="n">The</span> <span class="n">consumer</span> <span class="n">fills</span> <span class="n">out</span> <span class="n">the</span> <span class="n">required</span> <span class="n">fields</span> <span class="n">on</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">page</span> <span class="ow">and</span> <span class="n">submits</span> <span class="n">the</span> <span class="n">payment</span><span class="o">.</span> <span class="o">**</span><span class="n">Continue</span> <span class="k">with</span> <span class="n">step</span> <span class="mi">3</span><span class="o">**.</span>

<span class="o">-</span> <span class="n">If</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">POST</span> <span class="n">request</span> <span class="ow">is</span> <span class="n">faulty</span><span class="p">,</span> <span class="n">WPP</span> <span class="n">v2</span> <span class="n">returns</span> <span class="n">an</span> <span class="n">error</span> <span class="n">code</span> <span class="k">with</span> <span class="n">a</span> <span class="n">description</span> <span class="n">of</span> <span class="n">the</span> <span class="n">problem</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">response</span><span class="o">.</span> <span class="o">**</span><span class="n">Return</span> <span class="n">to</span> <span class="n">step</span> <span class="mi">1</span><span class="o">**.</span>
</pre></div>
</div>
<ol class="arabic" start="3">
<li><p><strong>Parse and process the payment response:</strong> The payment is processed. Depending on the result (successful, pending, failed or canceled), the consumer is redirected to the respective page. The WPP v2 sends a POST request containing base64 encoded payment data to the same URL. It is highly recommended that you parse and process this base64 encoded response to verify the payment.</p>
<p><strong>The payment process is complete.</strong></p>
</li>
</ol>
</div>
<div class="section" id="id4">
<h4>Payment-Processing Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>This is an example of a credit card transaction to show how to process a payment with the Embedded Payment Page.
For more supported payment methods and payment-method-specific integration guides, go to <a href="#id23"><span class="problematic" id="id24">`Payment Methods with WPP v2`_</span></a>.</p>
<p>The payment-processing example is <strong>designed for the testing environment</strong> and <strong>does not use real information</strong>.</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">**</span><span class="n">Payment</span> <span class="n">processing</span> <span class="k">with</span> <span class="n">the</span> <span class="n">Bankograph</span> <span class="n">Payment</span> <span class="n">Page</span> <span class="n">v2</span> <span class="n">generally</span> <span class="n">follows</span> <span class="n">the</span> <span class="n">same</span> <span class="n">steps</span><span class="p">:</span><span class="o">**</span>

<span class="mf">1.</span> <span class="n">Create</span> <span class="n">a</span> <span class="n">payment</span> <span class="n">session</span> <span class="p">(</span><span class="n">initial</span> <span class="n">request</span><span class="p">)</span><span class="o">.</span>

<span class="mf">2.</span> <span class="n">Render</span> <span class="n">the</span> <span class="n">embedded</span> <span class="n">payment</span> <span class="n">page</span><span class="o">.</span>

<span class="mf">3.</span> <span class="n">Highly</span> <span class="n">recommended</span><span class="p">:</span> <span class="n">Parse</span> <span class="ow">and</span> <span class="n">process</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">response</span><span class="o">.</span>
</pre></div>
</div>
<p>We provide ready-made JSON samples for each step of this process. Use a tool such as <code class="docutils literal notranslate"><span class="pre">Postman</span></code> to test them.</p>
<p><strong>Setup and Test Credentials</strong></p>
<p>Before you can send your first request, use the following information to set up your testing tool:</p>
<table class="docutils align-default" id="id13">
<caption><span class="caption-text">Test Credentials</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>URL (Endpoint)</strong></p></td>
<td><p><a class="reference external" href="https://wpp-test.bankograph.com/api/payment/register">https://wpp-test.bankograph.com/api/payment/register</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>Merchant Account ID (MAID)</strong></p></td>
<td><p>7a6dd74f-06ab-4f3f-a864-adc52687270a</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Username</strong></p></td>
<td><p>70000-APIDEMO-CARD</p></td>
</tr>
<tr class="row-even"><td><p><strong>Password</strong></p></td>
<td><p>ohysS0-dvfMx</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Secret Key (used for response verification)</strong></p></td>
<td><p>a8c3fce6-8df7-4fd6-a1fd-62fa229c5e55</p></td>
</tr>
<tr class="row-even"><td><p><strong>Test Card</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>Card number</strong></p></td>
<td><p>4200000000000018</p></td>
</tr>
<tr class="row-even"><td><p><strong>Expiration date</strong></p></td>
<td><p>01/23</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CVV</strong></p></td>
<td><p>018</p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple">
<li><p><strong>Create a Payment Session</strong></p></li>
</ol>
<p>To create a payment session, send a <strong>POST request</strong> to the <code class="docutils literal notranslate"><span class="pre">/api/payment/register</span></code> endpoint, e.g. <code class="docutils literal notranslate"><span class="pre">https://wpp-test.bankograph.com/api/payment/register</span></code>.</p>
<p>This is an HTTP request with two headers:</p>
<blockquote>
<div><p><strong>Request Headers</strong></p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Authorization</span><span class="p">:</span> <span class="n">Basic</span> <span class="n">NzAwMDAtQVBJREVNTy1DQVJEOm9oeXNTMC1kdmZNeA</span><span class="o">==</span>
</pre></div>
</div>
<p>The Authorization header needs to be formatted as: &quot;Authorization&quot;=&quot;Basic&quot; + base64(&quot;username:password&quot;)</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Code Blocks can have captions.</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span> <span class="p">{</span>
   <span class="nt">&quot;payment&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="nt">&quot;merchant-account-id&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;7a6dd74f-06ab-4f3f-a864-adc52687270a&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;request-id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{$guid}}&quot;</span><span class="p">,</span>
<span class="nt">&quot;transaction-type&quot;</span><span class="p">:</span> <span class="s2">&quot;authorization&quot;</span><span class="p">,</span>
<span class="nt">&quot;requested-amount&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;account-holder&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;first-name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
  <span class="nt">&quot;last-name&quot;</span><span class="p">:</span> <span class="s2">&quot;Doe&quot;</span>
<span class="p">},</span>
<span class="nt">&quot;payment-methods&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;payment-method&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;creditcard&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">},</span>
<span class="nt">&quot;success-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/success&quot;</span><span class="p">,</span>
<span class="nt">&quot;fail-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/error&quot;</span><span class="p">,</span>
<span class="nt">&quot;cancel-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/cancel&quot;</span>
<span class="p">},</span>
  <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;embedded&quot;</span><span class="p">,</span>
  <span class="nt">&quot;frame-ancestor&quot;</span><span class="p">:</span> <span class="s2">&quot;https://example.com&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>
</div>
</div>
<table class="docutils align-default" id="id15">
<caption><span class="caption-text">Field Table</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Field (JSON)</strong></p></td>
<td><p><strong>Data Type</strong></p></td>
<td><p><strong>Required/Optional</strong></p></td>
<td><p><strong>Size</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>merchant-account-id / value</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>36</p></td>
<td><p>A unique identifier assigned to every merchant account (by Bankograph).</p></td>
</tr>
<tr class="row-odd"><td><p>request-id</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>150</p></td>
<td><dl class="simple">
<dt>A unique identifier assigned to every request (by merchant). Used when searching for or referencing it later. {{$guid}} serves as a placeholder for a random request-id. Allowed characters:</dt><dd><p>a - z
0 - 9</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>transaction-type</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>36</p></td>
<td><p>The requested transaction type.</p></td>
</tr>
<tr class="row-odd"><td><p>requested-amount /Value</p></td>
<td><p>Numeric</p></td>
<td><p>Required</p></td>
<td><p>18</p></td>
<td><p>The full amount that is requested/contested in a transaction. 2 decimal places allowed. Use (decimal point) as the separator.</p></td>
</tr>
<tr class="row-even"><td><p>requested-amount /currency</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>3</p></td>
<td><p>The currency of the requested/contested transaction amount. Format 3-character abbreviation according to ISO 4217.</p></td>
</tr>
<tr class="row-odd"><td><p>account holder / first-name</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>32</p></td>
<td><p>The first name of the account holder.</p></td>
</tr>
<tr class="row-even"><td><p>account holder / last-name</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>32</p></td>
<td><p>The last name of the account holder.</p></td>
</tr>
<tr class="row-odd"><td><p>payment-method / name</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>15</p></td>
<td><p>The name of the payment method used. Set this value to creditcard.</p></td>
</tr>
<tr class="row-even"><td><p>success-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after a successful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/success">https://demoshop-test.bankograph.com/demoshop/#/success</a></p></td>
</tr>
<tr class="row-odd"><td><p>fail-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after a unsuccessful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/error">https://demoshop-test.bankograph.com/demoshop/#/error</a></p></td>
</tr>
<tr class="row-even"><td><p>cancel-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after having canceled a payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/cancel">https://demoshop-test.bankograph.com/demoshop/#/cancel</a></p></td>
</tr>
<tr class="row-odd"><td><p>options / mode</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>8</p></td>
<td><p>Indicates which mode of payment page is used for the payment. Currently supports <code class="docutils literal notranslate"><span class="pre">seamless</span></code> and <code class="docutils literal notranslate"><span class="pre">embedded</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>options / frame-ancestor</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>256</p></td>
<td><p>The URL of the checkout page where the iframe is rendered.</p></td>
</tr>
</tbody>
</table>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>To create a payment session with Credit Card using 3D Secure 2 authentication, you need to include 3D Secure 2 fields in your initial request.
Most of these fields are optional but we recommend the implementation of optional fields, as this creates a smoother user experience and ensures a higher level of security.
Need more information on 3D Secure 2? Head to our general introduction to 3D Secure 2.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><strong>Which Payment Methods Can I Choose?</strong></p>
<p>Leave out the payment-methods object from the request. WPP v2 will show a grid of all available payment methods (based on your merchant configuration).</p>
<p>Alternatively, check out Payment Methods with WPP v2 for an overview of all supported payment methods.</p>
</div>
<p><strong>Download the full integration demo from our GitHub</strong></p>
<blockquote>
<div><a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-java"><img alt="_images/Available_on_Github_JAVA.png" src="_images/Available_on_Github_JAVA.png" /></a>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-php"><img alt="_images/Available_on_Github_PHP.png" src="_images/Available_on_Github_PHP.png" /></a>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><strong>Embed the Payment Page</strong></p></li>
</ol>
<p>The payment page is in this case an overlay window. It is created using the <code class="docutils literal notranslate"><span class="pre">payment-redirect-url</span></code>, contained in the response to the initial authorization request.</p>
<p><strong>Response to Authorization Request</strong></p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;payment-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://wpp-test.bankograph.com/?wPaymentToken=f0c0e5b3-23ad-4cb4-abca-ed80a0e770e7&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Embedding the Payment Page in your Checkout Page Using</strong> <code class="docutils literal notranslate"><span class="pre">WPP.embeddedPayUrl</span></code></p>
<p>You can use our predefined function to embed the payment page:</p>
<ol class="arabic simple">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">paymentPage.js</span></code> library to your checkout page HTML code</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;script src=&quot;https://wpp-test.bankograph.com/loader/paymentPage.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;

Make sure to pass the ``payment-redirect-url`` value from the initial response to the ``WPP.embeddedPayUrl`` function and call it to render the payment page.
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Submit the <strong>initial payment request</strong> on the backend.</p></li>
<li><p>Call the <code class="docutils literal notranslate"><span class="pre">WPP.hostedPayUrl(payment-redirect-url)</span></code> function in your HTML code to render the new pop-up window.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span><span class="n">WPP</span><span class="o">.</span><span class="n">embeddedPayUrl</span><span class="p">(</span><span class="s2">&quot;https://wpp-test.bankograph.com/?wPaymentToken=f0c0e5b3-23ad-4cb4-abca-ed80a0e770e7&quot;</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>The consumer is redirected to the payment form. There they enter their data and submit the form to confirm the payment. The response can</p>
<ul class="simple">
<li><p>be successful (<code class="docutils literal notranslate"><span class="pre">transaction-state:</span> <span class="pre">success</span></code>)</p></li>
<li><p>fail (<code class="docutils literal notranslate"><span class="pre">transaction-state:</span> <span class="pre">failed</span></code>)</p></li>
<li><p>or the consumer canceled the payment before/after submission (<code class="docutils literal notranslate"><span class="pre">transaction-state:</span> <span class="pre">failed</span></code>).</p></li>
</ul>
<p>The transaction result is displayed as the value of <code class="docutils literal notranslate"><span class="pre">transaction-state</span></code> in the payment response. Canceled payments are returned as <code class="docutils literal notranslate"><span class="pre">&quot;transaction-state&quot;</span> <span class="pre">:</span> <span class="pre">&quot;failed&quot;</span></code>, but the status description indicates it was canceled. More information (including the status code) can also be found in the payment response in the statuses object.</p>
<p>In any case, a base64 encoded response containing payment information is sent to the corresponding redirection URL <code class="docutils literal notranslate"><span class="pre">(success-redirect-url,</span> <span class="pre">cancel-redirect-url,</span> <span class="pre">or</span> <span class="pre">fail-redirect-url)</span></code>.</p>
<p>See <a href="#id25"><span class="problematic" id="id26">`Configuring Redirects and IPNs for WPP v2`_</span></a> for more information on redirection targets after payment.</p>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Parse and Process the Payment Response (Highly Recommended)</strong></p></li>
</ol>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">Where</span> <span class="pre">Can</span> <span class="pre">I</span> <span class="pre">Find</span> <span class="pre">the</span> <span class="pre">Payment</span> <span class="pre">Response?</span></code></p>
<blockquote>
<div><p>WPP v2 sends the final response to the success/fail page where the consumer is redirected to at the end of the payment session. This final response contains the payment data in a base64 encoded JSON format. It is sent with a POST request as form data <code class="docutils literal notranslate"><span class="pre">response-base64</span></code>.</p>
<blockquote>
<div><img alt="_images/Base64_v2_1.png" src="_images/Base64_v2_1.png" />
</div></blockquote>
</div></blockquote>
</div></blockquote>
<p>Before you are able to parse and process the payment response, you need to decode it.</p>
<p><strong>To test this</strong></p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p>Copy and paste the <code class="docutils literal notranslate"><span class="pre">payment-redirect-url</span></code> into your browser.</p></li>
<li><p>Open your browser’s console and complete the payment with the credit card information provided above.</p></li>
<li><p>In your browser’s console, find the form data <code class="docutils literal notranslate"><span class="pre">response-base64</span></code> (see screenshot).</p></li>
<li><p>Copy and paste the response into a base64 decoder of your choice, e.g. <a href="#id5"><span class="problematic" id="id6">:PEP:`Base64 Decode`</span></a>.</p></li>
<li><p>Decode the response to view the payment response details.</p></li>
</ul>
</div></blockquote>
<p>You can find a decoded payment response example below.</p>
</div></blockquote>
<p><strong>Parse and Process the Payment Response (Decoded Payment Response)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;payment&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;transaction-type&quot;</span><span class="p">:</span> <span class="s2">&quot;authorization&quot;</span><span class="p">,</span>
   <span class="s2">&quot;transaction-id&quot;</span><span class="p">:</span> <span class="s2">&quot;08649015-eb17-4c67-ab5f-d132af616e02&quot;</span><span class="p">,</span>
   <span class="s2">&quot;completion-time-stamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-12-19T12:02:26&quot;</span><span class="p">,</span>
   <span class="s2">&quot;card-token&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;token-id&quot;</span><span class="p">:</span> <span class="s2">&quot;4242796444090018&quot;</span><span class="p">,</span>
     <span class="s2">&quot;masked-account-number&quot;</span><span class="p">:</span> <span class="s2">&quot;420000******0018&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;merchant-account-id&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;7a6dd74f-06ab-4f3f-a864-adc52687270a&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;transaction-state&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
   <span class="s2">&quot;payment-methods&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;payment-method&quot;</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
         <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;creditcard&quot;</span>
       <span class="p">}</span>
     <span class="p">]</span>
    <span class="p">},</span>
   <span class="s2">&quot;cancel-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/cancel&quot;</span><span class="p">,</span>
   <span class="s2">&quot;success-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/success&quot;</span><span class="p">,</span>
   <span class="s2">&quot;fail-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/error&quot;</span><span class="p">,</span>
   <span class="s2">&quot;api-id&quot;</span><span class="p">:</span> <span class="s2">&quot;wpp&quot;</span>
  <span class="p">},</span>
 <span class="s2">&quot;request-id&quot;</span><span class="p">:</span> <span class="s2">&quot;28285dbd-ecd3-49bd-a7e5-0239affa2448&quot;</span><span class="p">,</span>
 <span class="s2">&quot;requested-amount&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span><span class="p">,</span>
   <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">10</span>
  <span class="p">},</span>
 <span class="s2">&quot;statuses&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">{</span>
       <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;3d-acquirer:The resource was successfully created.&quot;</span><span class="p">,</span>
       <span class="s2">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;information&quot;</span><span class="p">,</span>
       <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;201.0000&quot;</span>
     <span class="p">}</span>
   <span class="p">]</span>
  <span class="p">},</span>
 <span class="s2">&quot;authorization-code&quot;</span><span class="p">:</span> <span class="s2">&quot;801433&quot;</span><span class="p">,</span>
 <span class="s2">&quot;account-holder&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="s2">&quot;first-name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span>
   <span class="s2">&quot;last-name&quot;</span><span class="p">:</span> <span class="s2">&quot;Doe&quot;</span>
  <span class="p">},</span>
 <span class="s2">&quot;descriptor&quot;</span><span class="p">:</span> <span class="s2">&quot;demo descriptor&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default" id="id16">
<caption><span class="caption-text">Field Table</span><a class="headerlink" href="#id16" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Field (JSON)</strong></p></td>
<td><p><strong>Data Type</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>transaction-type</p></td>
<td><p>String</p></td>
<td><p>The requested transaction type.</p></td>
</tr>
<tr class="row-odd"><td><p>transaction-id</p></td>
<td><p>String</p></td>
<td><p>A unique identifier to every transaction (by Bankograph). Used when searching for or referencing to it later.</p></td>
</tr>
<tr class="row-even"><td><p>completion-time-stamp</p></td>
<td><p>YYYY-MM-DD-Thh:mm:ss</p></td>
<td><p>The UTC/ISO time-stamp documents the time &amp; date when the transaction was executed. Format: YYYY-MM-DDThh:mm:ss (ISO).</p></td>
</tr>
<tr class="row-odd"><td><p>card token / token-id</p></td>
<td><p>String</p></td>
<td><p>A unique identifier assigned to every card token.</p></td>
</tr>
<tr class="row-even"><td><p>card token / masked-account-number</p></td>
<td><p>String</p></td>
<td><p>This is the masked card account number of the consumer.</p></td>
</tr>
<tr class="row-odd"><td><p>merchant-account-id / value</p></td>
<td><p>String</p></td>
<td><p>A unique identifier assigned to every merchant account (by Bankograph).</p></td>
</tr>
<tr class="row-even"><td><p>transaction-state</p></td>
<td><p>String</p></td>
<td><dl>
<dt>The current transaction state. Possible values:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">in-progress</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">success</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">failed</span></code></p></li>
</ul>
<p>Typically, a transaction starts with state <code class="docutils literal notranslate"><span class="pre">in-progress</span></code> and finishes with state either <code class="docutils literal notranslate"><span class="pre">success</span></code> or <code class="docutils literal notranslate"><span class="pre">failed</span></code>. This information is returned in the response only.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>payment-mode / name</p></td>
<td><p>String</p></td>
<td><p>The name of the payment method used for the transaction.</p></td>
</tr>
<tr class="row-even"><td><p>cancel-redirect-url</p></td>
<td><p>String</p></td>
<td><p>The URL to which the consumer is redirected after having canceled payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/cancel">https://demoshop-test.bankograph.com/demoshop/#/cancel</a></p></td>
</tr>
<tr class="row-odd"><td><p>success-redirect-url</p></td>
<td><p>String</p></td>
<td><p>The URL to which the consumer is redirected after a successful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/success">https://demoshop-test.bankograph.com/demoshop/#/success</a></p></td>
</tr>
<tr class="row-even"><td><p>fail-redirect-url</p></td>
<td><p>String</p></td>
<td><p>The URL to which the consumer is redirected after a unsuccessful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/error">https://demoshop-test.bankograph.com/demoshop/#/error</a></p></td>
</tr>
<tr class="row-odd"><td><p>api-id</p></td>
<td><p>String</p></td>
<td><p>Identifier of the currently used API.</p></td>
</tr>
<tr class="row-even"><td><p>request-id</p></td>
<td><p>String</p></td>
<td><p>A unique identifier assigned to every request (by merchant). Used when searching for or referencing it later.</p></td>
</tr>
<tr class="row-odd"><td><p>requested-amount / currency</p></td>
<td><p>String</p></td>
<td><p>The currency of the requested/contested transaction amount.</p></td>
</tr>
<tr class="row-even"><td><p>requested-amount / value</p></td>
<td><p>Numeric</p></td>
<td><p>The full amount that is requested/contested in a transaction.</p></td>
</tr>
<tr class="row-odd"><td><p>status / description</p></td>
<td><p>String</p></td>
<td><p>The description of the transaction status message.</p></td>
</tr>
<tr class="row-even"><td><p>status / severity</p></td>
<td><p>String</p></td>
<td><dl class="simple">
<dt>The definition of the status message. Possible values:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">information</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warning</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error</span></code></p></li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>status / code</p></td>
<td><p>String</p></td>
<td><p>Status code of the status message.</p></td>
</tr>
<tr class="row-even"><td><p>authorization-code</p></td>
<td><p>String</p></td>
<td><p>Output code for transaction type authorization.</p></td>
</tr>
<tr class="row-odd"><td><p>account-holder / first-name</p></td>
<td><p>String</p></td>
<td><p>The first name of the account holder.</p></td>
</tr>
<tr class="row-even"><td><p>account-holder / last-name</p></td>
<td><p>String</p></td>
<td><p>The last name of the account holder.</p></td>
</tr>
<tr class="row-odd"><td><p>descriptor</p></td>
<td><p>String</p></td>
<td><p>Describes the transaction.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">For</span> <span class="n">more</span> <span class="n">information</span> <span class="n">on</span> <span class="n">redirect</span> <span class="n">URLs</span><span class="p">,</span> <span class="n">see</span> <span class="n">Configuring</span> <span class="n">Redirects</span> <span class="ow">and</span> <span class="n">IPNs</span> <span class="k">for</span> <span class="n">WPP</span> <span class="n">v2</span><span class="o">.</span>
<span class="n">For</span> <span class="n">payment</span><span class="o">-</span><span class="n">method</span><span class="o">-</span><span class="n">specific</span> <span class="n">requests</span><span class="p">,</span> <span class="n">head</span> <span class="n">over</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Payment</span> <span class="n">Methods</span> <span class="k">with</span> <span class="n">WPP</span> <span class="n">v2</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="merchants-integrated-with-nvp-epp">
<h4>Merchants Integrated with NVP (EPP)<a class="headerlink" href="#merchants-integrated-with-nvp-epp" title="Permalink to this headline">¶</a></h4>
<p><strong>Migrating to WPP v2</strong></p>
<p>In addition to the new backend-to-backend JSON flow, WPP v2 supports an updated NVP flow for merchants who already integrated one of the Payment Page solutions previously and do not want to switch.</p>
<p>In that case, the migration to WPP v2 requires only a few minor changes. New features have an NVP field equivalent so you can use them in your integration. Check the WPP v2 Features section for specifics.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Contact</span> <span class="n">merchant</span> <span class="n">support</span> <span class="k">for</span> <span class="n">your</span> <span class="n">production</span> <span class="n">credentials</span><span class="o">.</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Find the paymentPageLoader JavaScript library in your &lt;head&gt; HTML code:</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://api-test.bankograph.com/engine/hpp/paymentPageLoader.js&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Replace it with:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://wpp-test.bankograph.com/loader/paymentPage.js&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Find the embeddedPay function call at the end of your Pay button function:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WirecardPaymentPage</span><span class="o">.</span><span class="n">embeddedPay</span><span class="p">(</span><span class="n">requestData</span><span class="p">);</span>
</pre></div>
</div>
<p>Replace it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WPP</span><span class="o">.</span><span class="n">embeddedPay</span><span class="p">(</span><span class="n">requestData</span><span class="p">);</span>
</pre></div>
</div>
<p>The fields in requestData remain the same and no changes are needed.</p>
</div>
</div>
<div class="section" id="seamless-integration-guide">
<h3>Seamless Integration Guide<a class="headerlink" href="#seamless-integration-guide" title="Permalink to this headline">¶</a></h3>
<p><em>Download the full integration demo from our Github</em></p>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-java"><img alt="_images/Available_on_Github_JAVA.png" src="_images/Available_on_Github_JAVA.png" /></a>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-php"><img alt="_images/Available_on_Github_PHP.png" src="_images/Available_on_Github_PHP.png" /></a>
<div class="section" id="id7">
<h4>Overview<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>To integrate the Bankograph Payment Page v2 in Seamless Mode in your shop, get your checkout page ready in two steps:</p>
<ol class="arabic simple">
<li><p><strong>Preparing your checkout page</strong>: Add the <code class="docutils literal notranslate"><span class="pre">paymentPage.js</span></code> library to your checkout page’s HTML code.</p></li>
<li><p><strong>Changing the background color setting in Payment Page Designer:</strong> Set the background color to transparent in Payment Page Designer.</p></li>
</ol>
<p>Then use a backend-to-backend JSON workflow for the payment process.</p>
<ol class="arabic simple">
<li><p><strong>Create a payment session:</strong> You send an initial POST request with details of the transaction to the Bankograph Payment Page v2 (WPP v2). This POST request is secured by basic access authentication.</p></li>
<li><p><strong>Render the seamless payment form:</strong> WPP v2 returns an initial response URL.</p></li>
</ol>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<ul class="simple">
<li><p>If the initial POST request is correct, use this response URL and the WPP.seamlessRender library call to render the payment form in a seamless iframe. Continue with step 3.</p></li>
<li><p>If the initial POST request is faulty, WPP v2 returns an error code with a description of the problem in the response. Return to step 1.</p></li>
</ul>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Submit the payment:</strong> The consumer fills in the payment form. Use the WPP.seamlessSubmit function to submit the payment. Ensure that the function is bound to an interactive UI element, such as a button, in your HTML code.</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><strong>3D Secure credit card payment</strong> automatically redirects the consumer to the authentication page, and then to a WPP v2 success- or fail-redirect-url. Include the success- and fail-redirect-urls in your initial request! This page includes a JSON sample for 3D Secure credit card payment.</p></li>
<li><p><strong>Non-3D Secure credit card payment</strong> requires you to implement redirects to subsequent pages, such as a <code class="docutils literal notranslate"><span class="pre">success-/fail-/cancel-redirect-url</span></code> to let the consumer know about the payment outcome, by yourself.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p><strong>Parse and Process the Payment Response:</strong> The payment is processed. WPP v2 returns base64 encoded payment data. It is highly recommended that you parse and process this base64 encoded response to verify the payment.</p></li>
</ol>
</div>
<div class="section" id="first-steps">
<h4>First Steps<a class="headerlink" href="#first-steps" title="Permalink to this headline">¶</a></h4>
<p>Before processing payments in Seamless Mode, you need to make a small adjustment to your checkout page’s HTML code, and change a setting in the Payment Page Designer.</p>
<ol class="arabic simple">
<li><p><strong>Preparing your Checkout Page</strong></p></li>
</ol>
<p>Add the paymentPage.js library to your checkout page HTML code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://wpp-test.bankograph.com/loader/paymentPage.js&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This library lets you render the payment form as an iframe in your checkout page.</p>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>The URL included here serves only as an example. Please enter the domain of the instance received during merchant configuration.</p>
</div>
<ol class="arabic" start="2">
<li><p><strong>Changing the Background Color Setting in Payment Page Designer</strong></p>
<p>Open the Payment Page Designer to set the background color to transparent. Transparency of the card form’s background ensures a seamless appearance when it is embedded in your checkout page.</p>
</li>
</ol>
<ol class="arabic simple">
<li><p>Select the <strong>Payment</strong> tab and click on <strong>Colors</strong>.</p></li>
</ol>
<img alt="_images/seamless_ppd_1.png" src="_images/seamless_ppd_1.png" />
<ol class="arabic simple" start="2">
<li><p>In <strong>Colors</strong>, go to the <strong>Content</strong> tab and open the <strong>Content Background Color</strong> window.</p></li>
</ol>
<img alt="_images/seamless_ppd_2.png" src="_images/seamless_ppd_2.png" />
<ol class="arabic simple" start="3">
<li><p>Set the <strong>Content Background Color</strong> alpha value <strong>(A)</strong> to <strong>0</strong></p></li>
</ol>
<img alt="_images/seamless_ppd_3.png" src="_images/seamless_ppd_3.png" />
</div>
<div class="section" id="id8">
<h4>Payment-Processing Example<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>This is an example of a credit card 3D Secure transaction to show how to process a payment with the Bankograph Payment Page v2 in Seamless Mode. Currently, Seamless Mode supports <strong>only credit card payments</strong>. For a more payment-method-specific integration guide, go to Credit Card.</p>
<p>The payment-processing example is <strong>designed for the testing environment</strong> and does not use <strong>real information</strong>.</p>
<p>Payment processing with Bankograph Payment Page v2 in Seamless Mode deviates a little bit from the</p>
<p>HPP and EPP payment processing workflow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Payment</span> <span class="n">Processing</span> <span class="k">with</span> <span class="n">Bankograph</span> <span class="n">Payment</span> <span class="n">Page</span> <span class="n">v2</span> <span class="ow">in</span> <span class="n">Seamless</span> <span class="n">Mode</span>

<span class="mf">1.</span><span class="n">Create</span> <span class="n">a</span> <span class="n">payment</span> <span class="n">session</span> <span class="p">(</span><span class="n">initial</span> <span class="n">request</span><span class="p">)</span><span class="o">.</span>
<span class="mf">2.</span><span class="n">Render</span> <span class="n">the</span> <span class="n">Seamless</span> <span class="n">payment</span> <span class="n">form</span> <span class="ow">in</span> <span class="n">your</span> <span class="n">checkout</span> <span class="n">page</span> <span class="p">(</span><span class="n">initial</span> <span class="n">response</span> <span class="n">URL</span><span class="p">)</span><span class="o">.</span>
<span class="mf">3.</span><span class="n">Submit</span> <span class="n">the</span> <span class="n">payment</span><span class="o">.</span>
<span class="mf">4.</span><span class="n">Highly</span> <span class="n">recommended</span><span class="p">:</span> <span class="n">Parse</span> <span class="ow">and</span> <span class="n">process</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">response</span><span class="o">.</span>

<span class="n">Payment</span> <span class="n">Processing</span> <span class="k">with</span> <span class="n">HPP</span> <span class="ow">and</span> <span class="n">EPP</span>

<span class="mf">1.</span><span class="n">Create</span> <span class="n">a</span> <span class="n">payment</span> <span class="n">session</span> <span class="p">(</span><span class="n">initial</span> <span class="n">request</span><span class="p">)</span><span class="o">.</span>
<span class="mf">2.</span><span class="n">Redirect</span> <span class="n">the</span> <span class="n">consumer</span> <span class="n">to</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">page</span> <span class="p">(</span><span class="n">initial</span> <span class="n">response</span> <span class="n">URL</span><span class="p">)</span><span class="o">.</span>
<span class="mf">3.</span><span class="n">Highly</span> <span class="n">recommended</span><span class="p">:</span> <span class="n">Parse</span> <span class="ow">and</span> <span class="n">process</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">response</span><span class="o">.</span>
</pre></div>
</div>
<p><strong>Setup and Test Credentials</strong></p>
<blockquote>
<div><p>Before you can send your first request, use the following information to set up your testing tool:</p>
<table class="docutils align-default" id="id17">
<caption><span class="caption-text">Test Credentials</span><a class="headerlink" href="#id17" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>URL (Endpoint)</strong></p></td>
<td><p><a class="reference external" href="https://wpp-test.bankograph.com/api/payment/register">https://wpp-test.bankograph.com/api/payment/register</a></p></td>
</tr>
<tr class="row-even"><td><p><strong>Username</strong></p></td>
<td><p>70000-APILUHN-CARD</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Password</strong></p></td>
<td><p>8mhwavKVb91T</p></td>
</tr>
<tr class="row-even"><td><p><strong>MAID</strong></p></td>
<td><p>cad16b4a-abf2-450d-bcb8-1725a4cef443</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Secret Key (used for response verification)</strong></p></td>
<td><p>b3b131ad-ea7e-48bc-9e71-78d0c6ea579d</p></td>
</tr>
<tr class="row-even"><td><p><strong>Test Card</strong></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><strong>Card number</strong></p></td>
<td><p>4200000000000018</p></td>
</tr>
<tr class="row-even"><td><p><strong>Expiration date</strong></p></td>
<td><p>01/23</p></td>
</tr>
<tr class="row-odd"><td><p><strong>CVV</strong></p></td>
<td><p>003</p></td>
</tr>
<tr class="row-even"><td><p><strong>3D Verification Password</strong></p></td>
<td><p>wirecard</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<ol class="arabic simple">
<li><p><strong>Create a Payment Session</strong></p></li>
</ol>
<blockquote>
<div><p>To create a payment session, send a POST request to the /api/payment/register endpoint, e.g. <a class="reference external" href="https://wpp-test.bankograph.com/api/payment/register">https://wpp-test.bankograph.com/api/payment/register</a>.</p>
<p>This is an HTTP request with two headers:</p>
<p><strong>Request Headers</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">application</span><span class="o">/</span><span class="n">json</span>
<span class="n">Authorization</span><span class="p">:</span> <span class="n">Basic</span> <span class="n">NzAwMDAtQVBJREVNTy1DQVJEOm9oeXNTMC1kdmZNeA</span><span class="o">==</span>
</pre></div>
</div>
<p>The Authorization header needs to be formatted as: &quot;Authorization&quot;=&quot;Basic&quot; + base64(&quot;username:password&quot;)</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;payment&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="nt">&quot;merchant-account-id&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;cad16b4a-abf2-450d-bcb8-1725a4cef443&quot;</span>
     <span class="p">},</span>
   <span class="nt">&quot;request-id&quot;</span><span class="p">:</span> <span class="s2">&quot;{{$guid}}&quot;</span><span class="p">,</span>
   <span class="nt">&quot;transaction-type&quot;</span><span class="p">:</span> <span class="s2">&quot;purchase&quot;</span><span class="p">,</span>
   <span class="nt">&quot;requested-amount&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">10.1</span><span class="p">,</span>
    <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span>
    <span class="p">},</span>
   <span class="nt">&quot;payment-methods&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="nt">&quot;payment-method&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
           <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;creditcard&quot;</span>
          <span class="p">}</span>
        <span class="p">]</span>
     <span class="p">},</span>
    <span class="nt">&quot;three-d&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;attempt-three-d&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
   <span class="p">},</span>
  <span class="nt">&quot;success-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/success&quot;</span><span class="p">,</span>
  <span class="nt">&quot;fail-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/error&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cancel-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://demoshop-test.bankograph.com/demoshop/#/cancel&quot;</span>
   <span class="p">},</span>
 <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
   <span class="nt">&quot;mode&quot;</span><span class="p">:</span> <span class="s2">&quot;seamless&quot;</span><span class="p">,</span>
   <span class="nt">&quot;frame-ancestor&quot;</span><span class="p">:</span> <span class="s2">&quot;https://www.example.com&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<table class="docutils align-default" id="id18">
<caption><span class="caption-text">Field Table</span><a class="headerlink" href="#id18" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Field (JSON)</strong></p></td>
<td><p><strong>Data Type</strong></p></td>
<td><p><strong>Required/Optional</strong></p></td>
<td><p><strong>Size</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>merchant-account-id / value</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>36</p></td>
<td><p>A unique identifier assigned to every merchant account (by Bankograph).</p></td>
</tr>
<tr class="row-odd"><td><p>request-id</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>150</p></td>
<td><dl class="simple">
<dt>A unique identifier assigned to every request (by merchant). Used when searching for or referencing it later. {{$guid}} serves as a placeholder for a random request-id. Allowed characters:</dt><dd><p>a - z
0 - 9</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>transaction-type</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>36</p></td>
<td><p>The requested transaction type.</p></td>
</tr>
<tr class="row-odd"><td><p>requested-amount /Value</p></td>
<td><p>Numeric</p></td>
<td><p>Required</p></td>
<td><p>18</p></td>
<td><p>The full amount that is requested/contested in a transaction. 2 decimal places allowed. Use (decimal point) as the separator.</p></td>
</tr>
<tr class="row-even"><td><p>requested-amount /currency</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>3</p></td>
<td><p>The currency of the requested/contested transaction amount. Format 3-character abbreviation according to ISO 4217.</p></td>
</tr>
<tr class="row-odd"><td><p>payment-method / name</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>15</p></td>
<td><p>The name of the payment method used. Set this value to creditcard.</p></td>
</tr>
<tr class="row-even"><td><p>three-d / attempt-tree-d</p></td>
<td><p>Boolean</p></td>
<td><p>Conditional</p></td>
<td><p>N/A</p></td>
<td><p><strong>Required for 3D Secure transactions.</strong> Indicates whether 3D Secure authentication is enabled for the transaction.</p></td>
</tr>
<tr class="row-odd"><td><p>success-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after a successful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/success">https://demoshop-test.bankograph.com/demoshop/#/success</a></p></td>
</tr>
<tr class="row-even"><td><p>fail-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after a unsuccessful payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/error">https://demoshop-test.bankograph.com/demoshop/#/error</a></p></td>
</tr>
<tr class="row-odd"><td><p>cancel-redirect-url</p></td>
<td><p>String</p></td>
<td><p>Optional</p></td>
<td><p>256</p></td>
<td><p>The URL to which the consumer is redirected after having canceled a payment, e.g. <a class="reference external" href="https://demoshop-test.bankograph.com/demoshop/#/cancel">https://demoshop-test.bankograph.com/demoshop/#/cancel</a></p></td>
</tr>
<tr class="row-even"><td><p>options / mode</p></td>
<td><p>String</p></td>
<td><p>Required</p></td>
<td><p>8</p></td>
<td><p>Indicates which mode of payment page is used for the payment. Currently supports <code class="docutils literal notranslate"><span class="pre">embedded</span></code> and <code class="docutils literal notranslate"><span class="pre">seamless</span></code>. Use <code class="docutils literal notranslate"><span class="pre">seamless</span></code> in this example.</p></td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>To create a payment session with Credit Card using 3D Secure 2 authentication, you need to include 3D Secure 2 fields in your initial request.
Most of these fields are optional but we recommend the implementation of optional fields, as this creates a smoother user experience and ensures a higher level of security.
Need more information on 3D Secure 2? Head to our general introduction to 3D Secure 2.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You must include <code class="docutils literal notranslate"><span class="pre">&quot;options&quot;:</span> <span class="pre">{&quot;mode&quot;:&quot;seamless&quot;}</span></code> in your request, otherwise WPP v2 returns a regular payment URL that cannot be used in Seamless Mode.</p>
<p>Seamless Mode renders the payment form into an iframe. Therefore, you need to include <code class="docutils literal notranslate"><span class="pre">&quot;options&quot;:</span> <span class="pre">{`&quot;frame-ancestor&quot;:</span> <span class="pre">&quot;url&quot;}</span></code> in the request with your domain as the &quot;url&quot; value.
If you do not send <code class="docutils literal notranslate"><span class="pre">&quot;frame-ancestor&quot;</span></code> in the request, browsers will refuse to display the payment page in the iframe due to HTTP security policy.</p>
</div>
<p><strong>Download the full integration demo from our Github</strong></p>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-java"><img alt="_images/Available_on_Github_JAVA.png" src="_images/Available_on_Github_JAVA.png" /></a>
<a class="reference external image-reference" href="https://github.com/wirecard/wpp-integration-demo-php"><img alt="_images/Available_on_Github_PHP.png" src="_images/Available_on_Github_PHP.png" /></a>
<ol class="arabic simple" start="2">
<li><p><strong>Render the Seamless Payment Form</strong></p></li>
</ol>
<p>The response to the initial authorization request contains the <code class="docutils literal notranslate"><span class="pre">payment-redirect-url</span></code>.</p>
<p>Response to Authorization Request</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;payment-redirect-url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://wpp-test.bankograph.com/seamless?wPaymentToken=XUcGTdnxwwCWPEP-YOeDmT05_hg1bKbaibLTpcdR8cU&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Use the WPP.seamlessRender function to render the payment form in a seamless iframe. Include the <code class="docutils literal notranslate"><span class="pre">payment-redirect-url</span></code> here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WPP</span><span class="o">.</span><span class="n">seamlessRender</span><span class="p">({</span>
  <span class="n">url</span><span class="p">:</span> <span class="n">paymentredirecturl</span><span class="p">,</span> <span class="o">//</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">payment</span> <span class="n">link</span> <span class="n">returned</span> <span class="ow">in</span> <span class="n">response</span> <span class="n">to</span> <span class="n">your</span> <span class="n">initial</span> <span class="n">request</span>
  <span class="n">wrappingDivId</span><span class="p">:</span> <span class="s2">&quot;seamless-form-taret&quot;</span><span class="p">,</span>
  <span class="n">onSuccess</span><span class="p">:</span> <span class="n">function</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="p">{</span> <span class="o">//</span> <span class="n">called</span> <span class="n">when</span> <span class="n">seamless</span> <span class="n">form</span> <span class="ow">is</span> <span class="n">successfully</span> <span class="n">rendered</span>
  <span class="p">},</span>
  <span class="n">onError</span><span class="p">:</span> <span class="n">function</span> <span class="p">(</span><span class="n">errResp</span><span class="p">)</span> <span class="p">{</span> <span class="o">//</span> <span class="n">called</span> <span class="k">if</span> <span class="n">seamless</span> <span class="n">form</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">render</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function renders only the payment form! The button with which consumers confirm their payment must be part of your checkout page. Bind the function to an interactive UI element, such as a button, in your HTML code.</p>
</div>
<img alt="_images/seamless_iframe.png" src="_images/seamless_iframe.png" />
<p>Figure 5. Seamless payment form rendered into wrappingDivId</p>
<p>Render the Payment Form: Example from Bankograph Demoshop</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>  <span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://wpp-test.bankograph.com/loader/paymentPage.js&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="c">&lt;!-- the form will render in the following div --&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;seamless-form-target&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

    <span class="c">&lt;!-- the following javascript will render the form; make sure to set paymentredirecturl --&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
          <span class="c1">// change the next line to include YOUR TOKEN</span>
          <span class="kd">var</span> <span class="nx">paymentredirecturl</span> <span class="o">=</span> <span class="s2">&quot;https://wpp-test.bankograph.com/seamless?wPaymentToken=YOUR_TOKEN_HERE&quot;</span><span class="p">;</span>

          <span class="c1">// frame-ancestor in the initial request (Step 1) must match the domain you are using to test this</span>
         <span class="nx">WPP</span><span class="p">.</span><span class="nx">seamlessRender</span><span class="p">({</span>
               <span class="nx">url</span><span class="o">:</span> <span class="nx">paymentredirecturl</span><span class="p">,</span>
               <span class="nx">wrappingDivId</span><span class="o">:</span> <span class="s2">&quot;seamless-form-target&quot;</span><span class="p">,</span>
               <span class="nx">onSuccess</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
                 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
               <span class="p">},</span>
                 <span class="nx">onError</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
                 <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
               <span class="p">}</span>
          <span class="p">});</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
   <span class="c">&lt;!-- ... --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>

3. **Submit the Payment**

  Now the payment form has been rendered and consumers can enter their payment information.

  To submit that data, use the WPP.seamlessSubmit function:
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WPP</span><span class="o">.</span><span class="n">seamlessSubmit</span><span class="p">({</span>
    <span class="n">onSuccess</span><span class="p">:</span> <span class="n">function</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="p">{</span> <span class="o">//</span> <span class="n">called</span> <span class="n">when</span> <span class="n">seamless</span> <span class="n">form</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">successfully</span> <span class="n">submitted</span>
    <span class="p">},</span>
    <span class="n">onError</span><span class="p">:</span> <span class="n">function</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="p">{</span> <span class="o">//</span><span class="n">called</span> <span class="n">when</span> <span class="n">data</span> <span class="n">submission</span> <span class="n">fails</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Bind the function to an interactive UI element, such as a button, in your HTML code. The consumer can then click the button to submit the payment.</p>
</div>
<p>Submit the Payment: Example from Bankograph Demoshop</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;html&gt;
&lt;head&gt;
  &lt;!-- ... --&gt;
  &lt;script src=&quot;https://wpp-test.bankograph.com/loader/paymentPage.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
  &lt;!-- ... --&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;!-- ... --&gt;
  &lt;!-- the form will render in the following div --&gt;
  &lt;div id=&quot;seamless-form-target&quot;&gt;&lt;/div&gt;

  &lt;!-- the following javascript will render the form; make sure to set paymentredirecturl --&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
        // change the next line to include YOUR TOKEN
        var paymentredirecturl = &quot;https://wpp-test.bankograph.com/seamless?wPaymentToken=YOUR_TOKEN_HERE&quot;;

        // frame-ancestor in the initial request must match the domain you are using to test this
        WPP.seamlessRender({
             url: paymentredirecturl,
             wrappingDivId: &quot;seamless-form-target&quot;,
             onSuccess: function (response) {
               console.log(response);
              },
             onError: function (response) {
               console.log(response);
             }
        });
  &lt;/script&gt;

  &lt;!-- this code will generate the &quot;Pay Now&quot; button and enable the submission of the form --&gt;
  &lt;input id=&quot;wirecard_pay_btn&quot; type=&quot;button&quot; onclick=&quot;pay()&quot; value=&quot;Pay Now&quot;/&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;
      function pay() {
          WPP.seamlessSubmit({
              onSuccess: function (response) {
              // called when seamless form data is successfully submitted with non-3D Secure credit card
              // see section 4 (Parse and Process the Payment Response) on how to deal with this data
                console.log(response);
              },
              onError: function (response) {
              // called when seamless form data is successfully submitted with non-3D Secure credit card
              // see section 4 (Parse and Process the Payment Response) on how to deal with this data
                console.log(response);
              }
           });
      }
  &lt;/script&gt;
  &lt;!-- ... --&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The function only submits the payment.</p>
</div>
<p><strong>3D Secure Transaction Redirect</strong></p>
<blockquote>
<div><p>For 3D Secure transactions, WPP v2 in Seamless Mode automatically redirects the consumer to the card provider 3D Secure authentication pages. There are no actions required from you for this process.</p>
<p>After 3D Secure authentication, the payment is further processed.</p>
<p>Depending on the outcome, the consumer is redirected to a <code class="docutils literal notranslate"><span class="pre">success-/fail-/cancel-redirect-url</span></code>. As the consumer leaves your page for 3D Secure authentication, these URLs need to be set up in the same way as those for HPP and EPP integrations.</p>
</div></blockquote>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>This means that for 3D Secure Transactions, you need to include the <code class="docutils literal notranslate"><span class="pre">success-/fail-/cancel-redirect-url</span></code> in the initial request!</p>
<p>URLs for successful, failed, and canceled transactions can also be set during the initial merchant configuration and saved in the database. If you would like to change these default values, please contact Merchant Support.</p>
<p>More information on <code class="docutils literal notranslate"><span class="pre">success-/fail-/cancel-redirect-url</span></code> configuration can be found in Configuring Redirects and IPNs for WPP v2.</p>
</div>
<p><strong>Non 3D Secure Transaction Redirect</strong></p>
<blockquote>
<div><p>For Non-3D Secure transactions, any further steps, such as displaying success messages to your consumer, or redirecting your consumer to success-/fail-/cancel-pages, need to be implemented separately in your online shop.</p>
</div></blockquote>
<p>4.**The Parse and Process the Payment Response (Highly Recommended)**</p>
<blockquote>
<div><p>Once you have submitted the payment, and it has been processed, you receive a payment response. The payment response is sent in three parts: the <code class="docutils literal notranslate"><span class="pre">response-signature-base64</span></code>, the <code class="docutils literal notranslate"><span class="pre">response-signature-algorithm</span></code>, and the <code class="docutils literal notranslate"><span class="pre">response-base64</span></code>.</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Object</span> <span class="p">{</span>
<span class="s2">&quot;response-signature-base64&quot;</span><span class="p">:</span> <span class="s2">&quot;9JSIJ/G4Otz6KbAJTg20LSNOcvidhgGWAPR3BMXfbxQ=&quot;</span><span class="p">,</span>
<span class="s2">&quot;response-signature-algorithm&quot;</span><span class="p">:</span> <span class="s2">&quot;HmacSHA256&quot;</span><span class="p">,</span>
<span class="s2">&quot;response-base64&quot;</span><span class="p">:</span> <span class="s2">&quot;ewogICJwYXltZW50IiA6IHsKICAgICJmYWlsLXJlZGlyZWN0LXVybCIgOiAiaHR0cHM6Ly9kZW1vc2hvcC10ZXN0LndpcmVjYXJkLmNvbS9kZW1vc2hvcC8jIS9lcnJvciIsCiAgICAidHJhbnNhY3Rpb24tc3RhdGUiIDogInN1Y2Nlc3MiLAogICAgInN1Y2Nlc3MtcmVkaXJlY3QtdXJsIiA6ICJodHRwczovL2RlbW9zaG9wLXRlc3Qud2lyZWNhcmQuY29tL2RlbW9zaG9wLyMhL3N1Y2Nlc3MiLAogICAgInBheW1lbnQtbWV0aG9kcyIgOiB7CiAgICAgICJwYXltZW50LW1ldGhvZCIgOiBbIHsKICAgICAgICAibmFtZSIgOiAiY3JlZGl0Y2FyZCIKICAgICAgfSBdCiAgICB9LAogICAgInRocmVlLWQiIDogewogICAgICAiY2FyZGhvbGRlci1hdXRoZW50aWNhdGlvbi1zdGF0dXMiIDogIkEiLAogICAgICAiYXR0ZW1wdC10aHJlZS1kIiA6IGZhbHNlCiAgICB9LAogICAgImNhbmNlbC1yZWRpcmVjdC11cmwiIDogImh0dHBzOi8vZGVtb3Nob3AtdGVzdC53aXJlY2FyZC5jb20vZGVtb3Nob3AvIyEvY2FuY2VsIiwKICAgICJtZXJjaGFudC1hY2NvdW50LWlkIiA6IHsKICAgICAgInZhbHVlIiA6ICJjYWQxNmI0YS1hYmYyLTQ1MGQtYmNiOC0xNzI1YTRjZWY0NDMiCiAgICB9LAogICAgImN1c3RvbS1maWVsZHMiIDogewogICAgICAiY3VzdG9tLWZpZWxkIiA6IFsgewogICAgICAgICJmaWVsZC1uYW1lIiA6ICJlbGFzdGljLXBhZ2UtYXBpLjNkLm9yaWdpbmFsX3R4bl90eXBlIiwKICAgICAgICAiZmllbGQtdmFsdWUiIDogInB1cmNoYXNlIgogICAgICB9IF0KICAgIH0sCiAgICAidHJhbnNhY3Rpb24taWQiIDogImFkOWY5YjEyLTY4ODgtNDkxOC04N2NkLTZmYWRjNzRkYzRjOCIsCiAgICAiY29tcGxldGlvbi10aW1lLXN0YW1wIiA6ICIyMDE5LTAyLTExVDE1OjIzOjAwIiwKICAgICJyZXF1ZXN0ZWQtYW1vdW50IiA6IHsKICAgICAgImN1cnJlbmN5IiA6ICJFVVIiLAogICAgICAidmFsdWUiIDogMTAuMQogICAgfSwKICAgICJhdXRob3JpemF0aW9uLWNvZGUiIDogIjY4NzIwNiIsCiAgICAiY3NjLWNvZGUiIDogIk4iLAogICAgImFjY291bnQtaG9sZGVyIiA6IHsKICAgICAgImxhc3QtbmFtZSIgOiAibGFzdCIsCiAgICAgICJmaXJzdC1uYW1lIiA6ICJmaXJzdCIKICAgIH0sCiAgICAiY2FyZCIgOiB7CiAgICAgICJleHBpcmF0aW9uLW1vbnRoIiA6IDEsCiAgICAgICJleHBpcmF0aW9uLXllYXIiIDogMjAyMywKICAgICAgImNhcmQtdHlwZSIgOiAidmlzYSIsCiAgICAgICJtZXJjaGFudC10b2tlbml6YXRpb24tZmxhZyIgOiBmYWxzZQogICAgfSwKICAgICJzdGF0dXNlcyIgOiB7CiAgICAgICJzdGF0dXMiIDogWyB7CiAgICAgICAgImRlc2NyaXB0aW9uIiA6ICIzZC1hY3F1aXJlcjpUaGUgcmVzb3VyY2Ugd2FzIHN1Y2Nlc3NmdWxseSBjcmVhdGVkLiIsCiAgICAgICAgInNldmVyaXR5IiA6ICJpbmZvcm1hdGlvbiIsCiAgICAgICAgImNvZGUiIDogIjIwMS4wMDAwIgogICAgICB9LCB7CiAgICAgICAgImRlc2NyaXB0aW9uIiA6ICIzZC1hY3F1aXJlcjpQcm9vZiBvZiBhdXRoZW50aWNhdGlvbiBhdHRlbXB0IHdhcyBnZW5lcmF0ZWQuIiwKICAgICAgICAic2V2ZXJpdHkiIDogImluZm9ybWF0aW9uIiwKICAgICAgICAiY29kZSIgOiAiMjAwLjEwODQiCiAgICAgIH0gXQogICAgfSwKICAgICJwYXJlbnQtdHJhbnNhY3Rpb24taWQiIDogImFiMWI0MmI2LWIwYzktNGVmMC1iYjBjLTA1N2MzMjAzOTk1NyIsCiAgICAicGFyZW50LXRyYW5zYWN0aW9uLWFtb3VudCIgOiB7CiAgICAgICJjdXJyZW5jeSIgOiAiRVVSIiwKICAgICAgInZhbHVlIiA6IDEwLjEwMDAwMAogICAgfSwKICAgICJhcGktaWQiIDogIndwcCIsCiAgICAiZGV2aWNlIiA6IHsKICAgICAgImZpbmdlcnByaW50IiA6ICIzYmFiMTI2Zi05YjEzLWEzYmYtY2YwNS0yZTA5NjVmZGIwZGQiCiAgICB9LAogICAgImNhcmQtdG9rZW4iIDogewogICAgICAibWFza2VkLWFjY291bnQtbnVtYmVyIiA6ICI0MDEyMDAqKioqKio2MDAyIiwKICAgICAgInRva2VuLWlkIiA6ICI0ODE5MjUzODg4MDk2MDAyIgogICAgfSwKICAgICJ0cmFuc2FjdGlvbi10eXBlIiA6ICJwdXJjaGFzZSIsCiAgICAicmVxdWVzdC1pZCIgOiAiNGU4MTkyNDEtYTc1OS00NWYxLThmM2ItNWM3MTJlYjkyMzNmIgogIH0KfQ==&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">response-base64</span></code> contains the payment data.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">response-signature-base64</span></code> and the <code class="docutils literal notranslate"><span class="pre">response-signature-algorithm</span></code>, together with the Secret Key you receive upon signing a contract with Bankograph, are required for calculating the security response signature. The security response signature is essential for verifying the payment status.</dt><dd><p>Please consult WPP v2 Security for details and examples of response signature verification.</p>
</dd>
</dl>
</li>
</ul>
<p>In Seamless Mode, the WPP v2 sends the final response containing the payment data to either of the following destinations, depending on the payment mode.</p>
<p><strong>3D Secure Credit Card Payment</strong></p>
<p>The WPP v2 sends the final response containing the payment data to the <code class="docutils literal notranslate"><span class="pre">success-redirect-url/fail-redirect-url</span></code> <strong>specified in the initial request</strong>. This is the URL where the consumer is redirected to at the end of a payment session.</p>
<p>To parse and process the payment response of 3D Secure credit card payment, please consult <strong>WPP v2 Security for details</strong>.</p>
<p>This is the decoded payment data contained in the example payment response provided above.</p>
<p><strong>Decoded Payment Response</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;payment&quot;</span><span class="p">:</span> <span class="p">{</span>
     <span class="s2">&quot;transaction-state&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
     <span class="s2">&quot;payment-methods&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;payment-method&quot;</span><span class="p">:</span> <span class="p">[</span>
             <span class="p">{</span>
                 <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;creditcard&quot;</span>
             <span class="p">}</span>
         <span class="p">]</span>
     <span class="p">},</span>
     <span class="s2">&quot;three-d&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;cardholder-authentication-status&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span>
         <span class="s2">&quot;attempt-three-d&quot;</span><span class="p">:</span> <span class="n">false</span>
     <span class="p">},</span>
     <span class="s2">&quot;merchant-account-id&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;cad16b4a-abf2-450d-bcb8-1725a4cef443&quot;</span>
     <span class="p">},</span>
     <span class="s2">&quot;custom-fields&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;custom-field&quot;</span><span class="p">:</span> <span class="p">[</span>
             <span class="p">{</span>
                 <span class="s2">&quot;field-name&quot;</span><span class="p">:</span> <span class="s2">&quot;elastic-page-api.3d.original_txn_type&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;field-value&quot;</span><span class="p">:</span> <span class="s2">&quot;purchase&quot;</span>
           <span class="p">}</span>
         <span class="p">]</span>
     <span class="p">},</span>
     <span class="s2">&quot;transaction-id&quot;</span><span class="p">:</span> <span class="s2">&quot;ad9f9b12-6888-4918-87cd-6fadc74dc4c8&quot;</span><span class="p">,</span>
     <span class="s2">&quot;completion-time-stamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2019-02-11T15:23:00&quot;</span><span class="p">,</span>
     <span class="s2">&quot;requested-amount&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span><span class="p">,</span>
         <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">10.1</span>
     <span class="p">},</span>
     <span class="s2">&quot;authorization-code&quot;</span><span class="p">:</span> <span class="s2">&quot;687206&quot;</span><span class="p">,</span>
     <span class="s2">&quot;csc-code&quot;</span><span class="p">:</span> <span class="s2">&quot;N&quot;</span><span class="p">,</span>
     <span class="s2">&quot;account-holder&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;last-name&quot;</span><span class="p">:</span> <span class="s2">&quot;last&quot;</span><span class="p">,</span>
         <span class="s2">&quot;first-name&quot;</span><span class="p">:</span> <span class="s2">&quot;first&quot;</span>
     <span class="p">},</span>
     <span class="s2">&quot;card&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;expiration-month&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s2">&quot;expiration-year&quot;</span><span class="p">:</span> <span class="mi">2023</span><span class="p">,</span>
         <span class="s2">&quot;card-type&quot;</span><span class="p">:</span> <span class="s2">&quot;visa&quot;</span><span class="p">,</span>
         <span class="s2">&quot;merchant-tokenization-flag&quot;</span><span class="p">:</span> <span class="n">false</span>
     <span class="p">},</span>
     <span class="s2">&quot;statuses&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="p">[</span>
             <span class="p">{</span>
                 <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;3d-acquirer:The resource was successfully created.&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;information&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;201.0000&quot;</span>
             <span class="p">},</span>
             <span class="p">{</span>
                 <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;3d-acquirer:Proof of authentication attempt was generated.&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;information&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;200.1084&quot;</span>
             <span class="p">}</span>
         <span class="p">]</span>
     <span class="p">},</span>
     <span class="s2">&quot;parent-transaction-id&quot;</span><span class="p">:</span> <span class="s2">&quot;ab1b42b6-b0c9-4ef0-bb0c-057c32039957&quot;</span><span class="p">,</span>
     <span class="s2">&quot;parent-transaction-amount&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;EUR&quot;</span><span class="p">,</span>
         <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">10.1</span>
     <span class="p">},</span>
     <span class="s2">&quot;api-id&quot;</span><span class="p">:</span> <span class="s2">&quot;wpp&quot;</span>
     <span class="p">},</span>
     <span class="s2">&quot;card-token&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="s2">&quot;masked-account-number&quot;</span><span class="p">:</span> <span class="s2">&quot;401200******6002&quot;</span><span class="p">,</span>
         <span class="s2">&quot;token-id&quot;</span><span class="p">:</span> <span class="s2">&quot;4819253888096002&quot;</span>
     <span class="p">},</span>
     <span class="s2">&quot;transaction-type&quot;</span><span class="p">:</span> <span class="s2">&quot;purchase&quot;</span><span class="p">,</span>
     <span class="s2">&quot;request-id&quot;</span><span class="p">:</span> <span class="s2">&quot;4e819241-a759-45f1-8f3b-5c712eb9233f&quot;</span>
 <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="Home.html" class="btn btn-neutral" title="Home" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, WOW Digital.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and ❤️  using a custom <a href="https://github.com/LinxiFan/Stanford-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'24th June',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/documentation_options.js"></script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>